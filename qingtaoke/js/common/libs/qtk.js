define("qtk",["jquery","underscore","common","config","errorCode","cookie","alimama"],function(a,b,c,d,e,f,g){return function(){function h(){}return h.prototype.vc=function(a){var b,c,d,e,f;for(f=3125363,c=d=0,e=a.length;d<e;c=++d)b=a[c],f+=b.charCodeAt(0)<<c%8;return f},h.prototype.getHost=function(){return parseInt(10*Math.random()),"http://www.qingtaoke.com/"},h.prototype.getQtkData=function(c){var f,g,h,i,j,k,l;i="GET",f=null;for(h in arguments)l=arguments[h],b.isString(l)&&"post"===l.toLowerCase()&&(i="POST"),b.isObject(l)&&(f=l);return g=a.Deferred(),k=d.version+"q"+d.versionCode+"t"+d.uid+"k"+c+"q",j={dataType:"json",method:i,headers:{version:d.version,versionCode:d.versionCode,uid:d.uid,vc:this.vc(k)},error:function(a){return function(a,b,c){return g.reject({errorCode:e.ERROR_NETWORK,errorText:"\u7f51\u7edc\u9519\u8bef\u6216\u670d\u52a1\u5668\u9519\u8bef"})}}(),success:function(a){return function(a){var b;return 0!==a.status&&(b="\u5176\u4ed6\u9519\u8bef",void 0!==a.data&&(b=a.data),g.reject({errorCode:e.ERROR_QTK_REQUIRE_DATA_IS_EMPTY,errorText:b})),g.resolve(a.data)}}()},f&&(j.data=f),a.ajax(c,j),g},h.prototype.getOtherURL=function(d){var f,g,h,i,j,k;i="GET",f=null;for(h in arguments)k=arguments[h],b.isString(k)&&"post"===k.toLowerCase()&&(i="POST"),b.isObject(k)&&(f=k);return g=a.Deferred(),j={dataType:"json",method:i,error:function(a){return function(a,b,c){return g.reject({errorCode:e.ERROR_NETWORK,errorText:"\u7f51\u7edc\u9519\u8bef\u6216\u670d\u52a1\u5668\u9519\u8bef"})}}(),success:function(a){return function(a){return c.log("print houtai result:"),c.log(a),void 0!==a.status?(0!==a.status&&g.reject({errorCode:e.ERROR_SHORT_URL,errorText:"URL\u8f6c\u6362\u5931\u8d25"}),g.resolve(a)):(c.log("ht222"),void 0!==a.err?(c.log("taobaobao"),null==a.err?g.resolve(a):g.reject({errorCode:e.ERROR_SHORT_URL,errorText:"URL\u8f6c\u6362\u5931\u8d25111"})):(c.log("\u65b0\u6d6a"),c.log(a[0]),void 0!==a.error_code&&g.reject({errorCode:e.ERROR_SHORT_URL,errorText:"URL\u8f6c\u6362\u5931\u8d253"}),g.resolve(a[0])))}}()},f&&(j.data=f),a.ajax(d,j),g},h.prototype.reSearchQueQiao=function(b){var c,d,e;return e=this.getHost()+"api/Collection/ReGoodsIDList?goodID="+b,d=a.Deferred(),c=this.getQtkData(e),c.fail(function(a){return d.reject(a)}),c.done(function(a){return a&&a.length>0?d.resolve(a):d.resolve(null)}),d},h.prototype.htShortURL=function(b){var d,e,f,g;return c.log("baidu urL---="+b),g="http://dwz.cn/create.php",f={url:""+b,alias:"",access_type:"web"},e=a.Deferred(),d=this.getOtherURL(g,"POST",f),d.fail(function(a){return c.log("re bd err"),c.log(a),e.reject(a)}),d.done(function(a){return c.log("re bd done"),c.log(a),e.resolve(a)}),e},h.prototype.htShortTaoBBURL=function(b){var d,e,f,g;return c.log("taobb urL---="+b),g="http://tao.bb/d/save",f={url:""+b},e=a.Deferred(),d=this.getOtherURL(g,"POST",f),d.fail(function(a){return c.log("re tabobb err"),c.log(a),e.reject(a)}),d.done(function(a){return c.log("re tabobb done"),c.log(a),e.resolve(a)}),e},h.prototype.saveCollectGoods=function(b){var c,d,e,f;return f=this.getHost()+"api/collection/caiJi",e=a.Deferred(),d={arrObj:b},c=this.getQtkData(f,d,"post"),c.fail(function(a){return e.reject(a)}),c.done(function(a){return e.resolve(a)}),e},h.prototype.htShortXinLURL=function(b){var d,e,f;return f="http://api.t.sina.com.cn/short_url/shorten.json?source=3268540792&url_long="+encodeURIComponent(b),c.log("htShortXinLURL---="+f),e=a.Deferred(),d=this.getOtherURL(f),d.fail(function(a){return e.reject(a)}),d.done(function(a){return e.resolve(a)}),e},h.prototype.htDoCollectionUser=function(b){var d,e,f;return c.log("htDoCollectionUser"),f=this.getHost()+"api/Collection/AddColl",c.log(b),c.log("****"),e=a.Deferred(),d=this.getQtkData(f,"post",b),d.fail(function(a){return c.log(a),e.reject(a)}),d.done(function(a){return c.log(a),e.resolve(a)}),e},h.prototype.htIsCollectionUser=function(b){var d,e,f,g;return c.log("htIsCollectionUser"),g=this.getHost()+"api/Collection/IsFindColl",f={goodsId:""+b},c.log(f),e=a.Deferred(),d=this.getQtkData(g,"post",f),d.fail(function(a){return c.log(a),e.reject(a)}),d.done(function(a){return c.log(a),e.resolve(a)}),e},h.prototype.htToSendURLData=function(b){var d,e,f,g;return c.log("htToSendURLData"),g=this.getHost()+"api/RePort/index",e={arrObj:JSON.stringify(b)},c.log(b),f=a.Deferred(),d=this.getQtkData(g,"post",e),d.fail(function(a){return c.log(a),f.reject(a)}),d.done(function(a){return c.log(a),f.resolve(a)}),f},h.prototype.getConfig=function(){var b,c,e;return e=this.getHost()+"api/user/getConfig",c=a.Deferred(),b=this.getQtkData(e),b.fail(function(a){var b;return b={username:"\u533f\u540d",expired:d.version,isValid:!0,reason:window.localStorage.reason||"\u8f7b\u6dd8\u5ba2\u91d1\u51a0\u8054\u76df\u6210\u5458\u7533\u8bf7\u63a8\u5e7f\u8ba1\u5212\uff0c\u671b\u8d35\u5e97\u901a\u8fc7\uff0c\u795d\u5408\u4f5c\u6109\u5feb\uff01\u8c22\u8c22",pidListAll:[],boundUnionAccount:[],detailTemplate:null},c.resolve(b)}),b.done(function(a){return c.resolve(a)}),c},h.prototype.htGetCaiJiIDList=function(){var b,c,d;return d=this.getHost()+"api/RePort/ListCaiJiAll",c=a.Deferred(),b=this.getQtkData(d),b.fail(function(a){return c.reject(a)}),b.done(function(a){return c.resolve(a)}),c},h.prototype.bindUnion=function(b,c,d){var e,f,g;return g=this.getHost()+"api/user/bindUnion",f=a.Deferred(),e=this.getQtkData(g,{memberId:b,nickname:d,rank:c}),e.fail(function(a){return f.reject(a)}),e.done(function(a){return f.resolve(a)}),f},h.prototype.saveReason=function(b){var c,e,f;return window.localStorage.reason=b,e=a.Deferred(),f=this.getHost()+"api/user/saveReason",c=this.getQtkData(f,"post",{reason:b}),c.fail(function(a){return e.reject(a)}),c.done(function(a){return d.reason=b,e.resolve(a)}),e},h.prototype.htAddAlimamaPID=function(b){var c,f,g;return f=a.Deferred(),g=this.getHost()+"api/Alimama2/DoAdd",c=this.getQtkData(g,"post",{reason:JSON.stringify(b)}),c.fail(function(a){return f.reject({errorCode:e.ERROR_EXIST,errorText:"\u5df2\u6dfb\u52a0"})}),c.done(function(a){return d.reason=b,f.resolve(a)}),f},h.prototype.getCollectedGid=function(){var b,c,d;return c=a.Deferred(),d=this.getHost()+"api/collection/getCollectedGid",b=this.getQtkData(d,"post"),b.fail(function(a){return c.reject(a)}),b.done(function(a){return c.resolve(a)}),c},h.prototype.getFavoriteGid=function(){var b,c,d;return c=a.Deferred(),d=this.getHost()+"api/collection/getFavoriteGid",b=this.getQtkData(d,"post"),b.fail(function(a){return c.reject(a)}),b.done(function(a){return c.resolve(a)}),c},h.prototype.htGetCollectIDList=function(){var b,c,d;return d=this.getHost()+"api/RePort/CollectAllList",c=a.Deferred(),b=this.getQtkData(d),b.fail(function(a){return c.reject(a)}),b.done(function(a){return c.resolve(a)}),c},h.prototype.getDetailTemplate=function(){var b,c,d;return d=this.getHost()+"api/user/getTemplateVue2",c=a.Deferred(),b=this.getQtkData(d),b.fail(function(a){return c.reject(a)}),b.done(function(a){return c.resolve(a)}),c},h.prototype.htUploadImg=function(b){var e,f,g,h;return c.log("htUploadImg"),h=d.uploadHost+d.uploadUrl,g={upfile:b},c.log(g),f=a.Deferred(),e=this.getQtkData(h,"post",g),e.fail(function(a){return f.reject(a)}),e.done(function(a){return c.log("re htUploadImg"),c.log(a)})},h.prototype.update=function(){var b,c,e;return e=this.getHost()+"api/setting/update",c=a.Deferred(),b=this.getQtkData(e,{c:d.versionCode,v:d.version}),b.fail(function(a){return c.reject(a)}),b.done(function(a){return c.resolve(a)}),c},h.prototype.getAppliedCampaign=function(b){var c,d;return d=a.Deferred(),c=new f,c.getAlimamaCookie("_tb_token_").done(function(a){return function(a){var c,e;return c=new g(a?a.value:null),e=c.getAppliedCampaign(b),e.fail(function(a){return d.reject(a)}),e.done(function(a){return d.resolve(a)})}}()),d},h.prototype.htPostForWardWX=function(b){var d,e,f,g;return c.log("htPostForWardWX"),g=this.getHost()+"api/WeiXin/Add",e={arrObj:JSON.stringify(b)},c.log(b),f=a.Deferred(),d=this.getQtkData(g,"post",e),d.fail(function(a){return c.log(a),f.reject(a)}),d.done(function(a){return c.log(a),f.resolve(a)}),f},h.prototype.getCommission=function(b){var c,d,e;return e=this.getHost()+"api/magpie/search",d=a.Deferred(),c=this.getQtkData(e,{gid:b}),c.fail(function(a){return d.reject(a)}),c.done(function(a){return d.resolve(a)}),d},h.prototype.getTurn2In1Link=function(b){var c,d,e,f;return f=this.getHost()+"api/transferLink/get",d={arrObj:JSON.stringify(b)},e=a.Deferred(),c=this.getQtkData(f,"post",d),c.fail(function(a){return e.reject(a)}),c.done(function(a){return e.resolve(a)}),e},h.prototype.getWechatLink=function(b){var d,e,f,g;return g=this.getHost()+"api/weiXin/createwx",e={arrObj:JSON.stringify(b)},f=a.Deferred(),d=this.getQtkData(g,"post",e),d.fail(function(a){return c.log(a),f.reject(a)}),d.done(function(a){return c.log(a),f.resolve(a)}),f},h.prototype.saveWechatTemplate=function(b){var d,e,f,g;return g=this.getHost()+"api/weiXin/setcode",e={arrObj:JSON.stringify(b)},f=a.Deferred(),d=this.getQtkData(g,"post",e),d.fail(function(a){return c.log(a),f.reject(a)}),d.done(function(a){return c.log(a),f.resolve(a)}),f},h.prototype.getWechatTemplate=function(){var b,d,e;return e=this.getHost()+"api/weiXin/getcode",d=a.Deferred(),b=this.getQtkData(e),b.fail(function(a){return c.log(a),d.reject(a)}),b.done(function(a){return c.log(a),d.resolve(a)}),d},h.prototype.getNoticeList=function(){var b,d,e;return e=this.getHost()+"api/weixin/createwx",d=a.Deferred(),b=this.getQtkData(e),b.fail(function(a){return c.log(a),d.reject(a)}),b.done(function(a){return c.log(a),d.resolve(a)}),d},h.prototype.getTransferLinkSpecial=function(b){var d,e,f,g;return g=this.getHost()+"api/transferLink/other",e={arrObj:JSON.stringify(b)},f=a.Deferred(),d=this.getQtkData(g,"post",e),d.fail(function(a){return c.log(a),f.reject(a)}),d.done(function(a){return c.log(a),f.resolve(a)}),f},h.prototype.getCopyPic=function(b){var d,e,f;return f="http://img1.qingtaoke.com/www/img/apiput/?url="+b,e=a.Deferred(),d=this.getQtkData(f),d.fail(function(a){return c.log(a),e.reject(a)}),d.done(function(a){return c.log(a),e.resolve(a)}),e},h.prototype.getPicAndCopy=function(b){var d,e,f;return f=this.getHost()+"api/weiXin/getimg?goodsid="+b,e=a.Deferred(),d=this.getQtkData(f),d.fail(function(a){return c.log(a),e.reject(a)}),d.done(function(a){return c.log(a),e.resolve(a)}),e},h.prototype.upLoadGoodsData=function(b){var d,e,f,g;return g=this.getHost()+"api/counter/count",e={arrObj:JSON.stringify(b)},f=a.Deferred(),d=this.getQtkData(g,"post",e),d.fail(function(a){return c.log(a),f.reject(a)}),d.done(function(a){return c.log(a),f.resolve(a)}),f},h.prototype.htPostSaveWX=function(b){var d,e,f,g;return c.log("htPostForWardWX"),g=this.getHost()+"api/WeiXin/AddList",e={arrObj:JSON.stringify(b)},c.log(b),f=a.Deferred(),d=this.getQtkData(g,"post",e),d.fail(function(a){return c.log(a),f.reject(a)}),d.done(function(a){return c.log(a),f.resolve(a)}),f},h.prototype.htTitleWX=function(){var b,d,e;return c.log("htTitleWX"),e=this.getHost()+"api/WeiXin/WxTitleList",d=a.Deferred(),b=this.getQtkData(e),b.fail(function(a){return c.log(a),d.reject(a)}),b.done(function(a){return c.log(a),d.resolve(a)}),d},h.prototype.htTestUserPlan=function(b,d){var e,f,g,h;return c.log("htTestUserPlan"),h=this.getHost()+"api/UserPlan/testUserPlan",f={arrObj:JSON.stringify(b),shopUid:d},g=a.Deferred(),e=this.getQtkData(h,"post",f),e.fail(function(a){return c.log(a),g.reject(a)}),e.done(function(a){return c.log(a),g.resolve(a)}),g},h.prototype.htMoreUserPlan=function(b,d){var e,f,g,h;return c.log("htTestUserPlan"),h=this.getHost()+"api/UserPlan/ListAddHidden",f={arrObj:JSON.stringify(b),delObj:JSON.stringify(d)},g=a.Deferred(),e=this.getQtkData(h,"post",f),e.fail(function(a){return c.log(a),g.reject(a)}),e.done(function(a){return c.log(a),g.resolve(a)}),g},h.prototype.htCouponList=function(b,d){var e,f,g,h;return c.log("htTestUserPlan"),h=this.getHost()+"api/UserPlan/UserCouponList",f={sid:b,gid:d},g=a.Deferred(),e=this.getQtkData(h,"post",f),e.fail(function(a){return c.log(a),g.reject(a)}),e.done(function(a){return c.log(a),g.resolve(a)}),g},h.prototype.couponOther=function(b,c){var d,e,f,g;return g=this.getHost()+"api/UserPlan/couponOther",e={sellerId:b,gid:c},f=a.Deferred(),d=this.getQtkData(g,"post",e),d.fail(function(a){return f.reject(a)}),d.done(function(a){return f.resolve(a)}),f},h.prototype.getHiddenCouponSecond=function(b,c){var d,e,f,g;return g=this.getHost()+"api/coupon/get",e={sellerId:b,gid:c},f=a.Deferred(),d=this.getQtkData(g,"post",e),d.fail(function(a){return f.reject(a)}),d.done(function(a){return f.resolve(a)}),f},h.prototype.openSetting=function(a,b){var c;if(null!==(c=window.localStorage.settingTabId||"")&&c.length>0)try{chrome.tabs.remove(parseInt(c))}catch(d){}return chrome.tabs.create({url:chrome.extension.getURL("/html/popup.html"),active:!1},function(c){return window.localStorage.settingTabId=String(c.id),chrome.windows.create({tabId:c.id,type:"popup",focused:!0,width:440,height:480,left:a,top:b})})},h.prototype.errorCount=function(b){var d,e,f,g;return g=this.getHost()+"api/error/log",e={arrObj:JSON.stringify(b)},f=a.Deferred(),d=this.getQtkData(g,"post",e),d.fail(function(a){return c.log(a),f.reject(a)}),d.done(function(a){return c.log(a),f.resolve(a)}),f},h.prototype.queryOnlineNumber=function(b){var d,e,f;return f=this.getHost()+"api/goodsSelf/online?goodsid="+b,e=a.Deferred(),d=this.getQtkData(f),d.fail(function(a){return c.log(a),e.reject(a)}),d.done(function(a){return c.log(a),e.resolve(a)}),e},h}()});