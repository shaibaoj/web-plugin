define("alimamaQueue",["jquery","underscore"],function(a,b){return{isRunning:!1,queue:[],push:function(b,c){var d;return d=a.Deferred(),this.queue.push({url:b,option:c,dtd:d}),this.start(),d},start:function(){if(this.timerHandler||this.checkRunning(),!this.isRunning)return this.run()},checkRunning:function(){return this.timerHandler=setInterval(function(a){return function(){return a.queue.length<1?a.isRunning=!1:a.run()}}(this),500)},run:function(){var b,c;return this.isRunning=!0,this.queue.length<1?(this.isRunning=!1,!1):(c=this.queue.shift(),c.option&&!c.option.timeout&&(c.option.timeout=2e3),b=a.ajax(c.url,c.option),b.fail(function(a){return function(b){return setTimeout(function(){return c.dtd.reject(b)},0),a.run()}}(this)),b.done(function(a){return function(b){return setTimeout(function(){return c.dtd.resolve(b)},0),a.run()}}(this)))}}});