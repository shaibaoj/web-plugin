define("addAlimamaPid",["jquery","underscore","common","layer","alimama","qtkApi","qtkConvertLinkPage","config","configInBackground"],function(a,b,c,d,e,f,g,h,i){return d.config({path:chrome.extension.getURL("/js/layer/")}),function(){function b(){c.log("constructor"),this.addTable(),this.addEv()}return b.prototype.toSendURLData=function(b){var e,g;return c.log("toSendData"),this,c.log(b),g=new f,e=g.PreAddAlimamaPID(b),e.fail(function(a){return c.log(a),d.msg(a.errorText)}),e.done(function(b){return function(e){var f,g;return f=e.tr,c.log(f),g="<tr><td>"+f.alias+"</td><td>mm_"+f.aid+"_"+f.siteId+"_"+f.adzoneId+'</td><td><button id="'+f.id+"\" class='delBtn'>\u5220\u9664</button></td></tr>",a(".empty-record").remove(),a(".qtk_web_pidList").find("table").append(g),b.addLayerIndex&&d.close(b.addLayerIndex),c.sendMsg("reloadConfig"),d.msg("\u6dfb\u52a0\u6210\u529f!")}}(this))},b.prototype.addTable=function(){var b;return b="<div id='qtk_flag' style='display:none'><span id='shell-versionCode'>"+h.versionCode+"</span><span id='shell-version'>"+h.version+"</span></div>",a("body").append(b)},b.prototype.addBtn=function(){var b;return b=this,a("#btnSubmit").on("click",function(){var c,e;return c=new i,e=a.when(c.get("isLoginAlimama"),c.get("tkMemberId")),e.done(function(c){return function(c,e){var f,g,h;return h=a.trim(a("#userAliPID").val()),h.length<1?(d.msg("PID\u4e0d\u80fd\u4e3a\u7a7a"),!1):/^mm_\d+_\d+_\d+$/.test(h)?(f=a.trim(a("#alias").val()),f.length<1?(d.msg("\u522b\u540d\u4e0d\u80fd\u4e3a\u7a7a"),!1):(g={},h.split("_"),g.userPid=h,g.alias=f,b.toSendURLData(g))):(d.msg("PID\u683c\u5f0f\u9519\u8bef\u3002"),!1)}}())})},b.prototype.addEv=function(){var b,c,e;return e=this,b="<div class='web_add_alimama_pid'><p>\u8f93\u5165\u4f60\u7684PID\uff1a</p><div style='text-align: center'><input style='height: 30px;width:300px;text-align: left' type='text' name='userAliPID' placeholder='mm_\u5f00\u5934\u7684\u4e09\u6bb5\u5f0fPID' id='userAliPID' size='60px'></div><p>\u522b\u540d\uff1a</p><div style='text-align: center'><input type='text' placeholder='\u53d6\u4e2a\u540d\u5b57\u4ee5\u65b9\u4fbf\u6807\u8bc6\u8be5PID\u7528\u4e8e\u4ec0\u4e48\u6e20\u9053'  style='height: 30px;width:300px;text-align: left' name='alias' id='alias'></div><div><div style='text-align: center'><button id='btnSubmit'>\u63d0\u4ea4</button></div></div></div>",c=this,a(".qtk_web_add_pid").on("click",function(){return c.addLayerIndex=d.open({type:1,skin:"layui-layer-demo",closeBtn:1,shift:2,title:"\u6dfb\u52a0PID",area:["400px","290px"],shade:!1,content:b,end:function(){return c.addLayerIndex=null},success:function(a,b){return e.addBtn()}})}),""},b}()});