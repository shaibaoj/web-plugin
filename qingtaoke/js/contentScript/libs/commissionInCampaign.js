define("commissionInCampaign",["jquery","underscore","alimama","errorCode","common"],function(a,b,c,d,e){return function(){function b(b,d,e){this.campaignId=b,this.shopkeeperId=d,this.userNumberId=e,this.dtd=a.Deferred(),this.page=1,this.alimama=new c}return b.prototype.get=function(a){return this.getGoods(a),this.dtd},b.prototype.getGoods=function(a){var b;return b=this.alimama.getCampaignGoods(this.campaignId,this.shopkeeperId,this.userNumberId,this.page),b.fail(function(b){return function(c){return c.errorCode===d.ERROR_ALIMAMA_LOGOUT?(e.sendMsg("alimamaLoginCheck"),b.dtd.reject(c),!1):(b.page++,setTimeout(function(){return b.getGoods(a)},150))}}(this)),b.done(function(b){return function(c){var d,f,g,h,i;if(e.log("erery page:"),e.log(b.page),b.page>=30)return b.dtd.resolve(null),!1;if(i=c.paginator,!(f=c.pagelist))return b.dtd.resolve(null),!1;for(g=0,h=f.length;g<h;g++)if(d=f[g],""+d.auctionId==""+a)return b.dtd.resolve(d),!0;return i?b.page<i.lastPage?(b.page++,setTimeout(function(){return b.getGoods(a)},150)):b.dtd.resolve(null):(b.dtd.resolve(null),!1)}}(this))},b}()});