define("loadConfig",["jquery","underscore","qtk","config"],function(a,b,c,d){return function(){function b(){this.dtd=a.Deferred(),this.openPage=!0,this.loadCount=0,this.maxLoadCount=10,arguments.length>0&&(this.openPage=arguments[0])}return b.prototype.load=function(){var a;return a=this.getConfig(),a.done(function(a){return function(b){return a.onGetConfig(b)}}(this)),a.fail(function(a){return function(b){return setTimeout(function(){if(!(++a.loadCount>a.maxLoadCount))return a.load()},5e3)}}(this)),this.dtd},b.prototype.onGetConfig=function(a){var b,c,e,f,g;if(0===a)return this.login(),this.dtd.reject(!1),!1;for(b in a)g=a[b],d[b]=g,d.tkMemberId&&(d.pidList=d.pidListAll[d.tkMemberId]);d.pidList=[],f=d.pidListAll;for(b in f){e=f[b];for(b in e)c=e[b],d.pidList.push(c)}return this.dtd.resolve(!0)},b.prototype.getConfig=function(){var b,d,e;return d=a.Deferred(),e=new c,b=e.getConfig(),b.fail(function(a){return d.reject(a)}),b.done(function(a){return d.resolve(a)}),d},b.prototype.login=function(){},b}()});